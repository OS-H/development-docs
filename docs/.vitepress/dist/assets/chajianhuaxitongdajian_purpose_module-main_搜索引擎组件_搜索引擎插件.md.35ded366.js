import{_ as s,c as a,o as n,N as e}from"./chunks/framework.719e9f09.js";const u=JSON.parse('{"title":"搜索引擎插件","description":"","frontmatter":{},"headers":[],"relativePath":"chajianhuaxitongdajian/purpose_module-main/搜索引擎组件/搜索引擎插件.md"}'),l={name:"chajianhuaxitongdajian/purpose_module-main/搜索引擎组件/搜索引擎插件.md"},t=e(`<h1 id="搜索引擎插件" tabindex="-1">搜索引擎插件 <a class="header-anchor" href="#搜索引擎插件" aria-label="Permalink to &quot;搜索引擎插件&quot;">​</a></h1><h2 id="版本" tabindex="-1">版本： <a class="header-anchor" href="#版本" aria-label="Permalink to &quot;版本：&quot;">​</a></h2><p>elasticsearch:7.4.2</p><h2 id="部署过程" tabindex="-1">部署过程： <a class="header-anchor" href="#部署过程" aria-label="Permalink to &quot;部署过程：&quot;">​</a></h2><ol><li>将镜像文件导入到服务器 比如镜像包名为 <code>elastic742.tar</code></li><li>镜像文件所在目录执行 <code>docker load -i elastic742.tar</code></li><li>创建数据目录</li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">mkdir -p /home/config/elasticsearch/config</span></span>
<span class="line"><span style="color:#A6ACCD;">mkdir -p /home/data/elasticsearch/data</span></span>
<span class="line"><span style="color:#A6ACCD;">mkdir -p /home/plugins/elasticsearch/plugins</span></span>
<span class="line"><span style="color:#A6ACCD;"># 配置任何远程机器都可以访问</span></span>
<span class="line"><span style="color:#A6ACCD;">echo &quot;http.host: 0.0.0.0&quot; &gt;&gt;/home/config/elasticsearch/config/elasticsearch.yml</span></span></code></pre></div><ol start="4"><li>启动服务</li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">docker run --name elasticsearch -p 9200:9200 -p 9300:9300 \\</span></span>
<span class="line"><span style="color:#A6ACCD;">-e &quot;discovery.type=single-node&quot; \\</span></span>
<span class="line"><span style="color:#A6ACCD;">-e ES_JAVA_OPTS=&quot;-Xms250m -Xmx512m&quot; \\</span></span>
<span class="line"><span style="color:#A6ACCD;">-v /home/config/elasticsearch/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml \\</span></span>
<span class="line"><span style="color:#A6ACCD;">-v /home/data/elasticsearch/data:/usr/share/elasticsearch/data \\</span></span>
<span class="line"><span style="color:#A6ACCD;">-v /home/plugins/elasticsearch/plugins:/usr/share/elasticsearch/plugins \\</span></span>
<span class="line"><span style="color:#A6ACCD;">--network=jky_network  \\</span></span>
<span class="line"><span style="color:#A6ACCD;">-d elasticsearch:7.4.2</span></span></code></pre></div><p>参数说明：</p><p>--name svc-elasticsearch：指定容器名称为svc-elasticsearch，为自定义</p><p>--network=jky_network：为容器指定网络为jky_network，同一网络下的容器能够通过容器名称互通。</p><h2 id="使用文档" tabindex="-1">使用文档 <a class="header-anchor" href="#使用文档" aria-label="Permalink to &quot;使用文档&quot;">​</a></h2><p>通过客户端工具进行链接操作</p><h3 id="python案例" tabindex="-1">python案例 <a class="header-anchor" href="#python案例" aria-label="Permalink to &quot;python案例&quot;">​</a></h3><p>安装对应的库包：<code>pip install elasticsearch</code></p><p>接下来，在您的代码中导入elasticsearch库并创建一个Elasticsearch客户端对象。</p><p>确保将主机和端口设置为您正在运行Elasticsearch的主机和端口。</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">from elasticsearch import Elasticsearch</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># 创建Elasticsearch客户端对象</span></span>
<span class="line"><span style="color:#A6ACCD;">es = Elasticsearch([&#39;http://localhost:19200/&#39;])</span></span></code></pre></div><p>现在，您可以使用该客户端对象执行各种操作，例如创建索引，插入文档，搜索等。</p><p>例如，以下是如何向名为“my-index”的索引插入一些数据。</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;"># 向索引插入数据</span></span>
<span class="line"><span style="color:#A6ACCD;">doc = {&#39;author&#39;: &#39;John Doe&#39;, &#39;text&#39;: &#39;Hello World&#39;}</span></span>
<span class="line"><span style="color:#A6ACCD;">res = es.index(index=&#39;my-index&#39;, id=1, body=doc)</span></span>
<span class="line"><span style="color:#A6ACCD;">print(res[&#39;result&#39;])</span></span></code></pre></div><h3 id="java案例" tabindex="-1">java案例 <a class="header-anchor" href="#java案例" aria-label="Permalink to &quot;java案例&quot;">​</a></h3><p>pom文件添加</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">&lt;dependency&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;groupId&gt;org.elasticsearch&lt;/groupId&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;artifactId&gt;elasticsearch&lt;/artifactId&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;version&gt;{elasticsearch_version}&lt;/version&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;/dependency&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;dependency&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;artifactId&gt;transport&lt;/artifactId&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;version&gt;{elasticsearch_version}&lt;/version&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;/dependency&gt;</span></span></code></pre></div><p>创建java类进行连接</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">TransportClient client = new PreBuiltTransportClient(Settings.EMPTY)</span></span>
<span class="line"><span style="color:#A6ACCD;">        .addTransportAddress(new InetSocketTransportAddress(InetAddress.getByName(&quot;localhost&quot;), 9300));</span></span></code></pre></div><p>使用Java API与Elasticsearch进行交互。</p><p>例如，以下代码将向名为“my_index”的索引添加一个文档：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">IndexResponse response = client.prepareIndex(&quot;my_index&quot;, &quot;my_type&quot;, &quot;my_id&quot;)</span></span>
<span class="line"><span style="color:#A6ACCD;">        .setSource(jsonBuilder()</span></span>
<span class="line"><span style="color:#A6ACCD;">                .startObject()</span></span>
<span class="line"><span style="color:#A6ACCD;">                .field(&quot;name&quot;, &quot;John Doe&quot;)</span></span>
<span class="line"><span style="color:#A6ACCD;">                .field(&quot;age&quot;, 25)</span></span>
<span class="line"><span style="color:#A6ACCD;">                .endObject()</span></span>
<span class="line"><span style="color:#A6ACCD;">        )</span></span>
<span class="line"><span style="color:#A6ACCD;">        .get();</span></span></code></pre></div>`,29),p=[t];function o(c,i,r,d,h,C){return n(),a("div",null,p)}const y=s(l,[["render",o]]);export{u as __pageData,y as default};
